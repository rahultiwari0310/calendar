(this.webpackJsonpcalendar_firebase=this.webpackJsonpcalendar_firebase||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),c=n(15),s=n.n(c),i=(n(33),n.p,n(34),n(28)),l=n(10),d=n(13),o=n(11),u=n.n(o),j=n(24),b=n(18),h=n(2);function f(e){var t=e.date,n=e.isFirstDay,a=e.addOrEditEvent,r=e.eventsInDay,c=e.handleDrop;return Object(h.jsxs)("div",{className:"col border",children:[Object(h.jsx)("div",{className:"day-heading",children:t.format("DD MMM YYYY")}),Object(h.jsx)("div",{className:"day-heading",children:t.format("dddd")}),Object(h.jsxs)("div",{className:"half-hours",children:[new Array(48).fill(1).map((function(e,r){var s=t.startOf("day").add(30*r,"minutes");return Object(h.jsx)(b.Droppable,{types:["event"],onDrop:function(e){c(s,e.event)},children:Object(h.jsx)("div",{className:"half-hour half-hour-".concat(r%2),onClick:function(e){return a({slot:s})},children:!n||r%2?null:Object(h.jsx)("span",{className:"half-hour-time",children:s.format("hh:mm A")})},s.$d.getTime())},s.$d.getTime())})),r.map((function(e){return Object(h.jsxs)("div",{className:"event-in-day",style:{height:(e.endDate-e.startDate)/18e5*20+"px",top:(e.startDate-t.startOf("day").$d.getTime())/18e5*20+"px"},"data-for":e.eventId,"data-tip":!0,onClick:function(t){return a(Object(l.a)({},e))},children:[Object(h.jsx)(b.Draggable,{type:"event",data:e.eventId,children:Object(h.jsxs)("div",{className:"event-content",children:[Object(h.jsx)("div",{className:"event-title",children:e.title}),Object(h.jsxs)("div",{className:"event-time",children:[u()(e.startDate).format("hh:mm")," -"," ",u()(e.endDate).format("hh:mm A")]})]})}),Object(h.jsxs)(j.a,{id:e.eventId,effect:"solid",clickable:!0,offset:{top:0,left:0},children:[Object(h.jsxs)("p",{children:["Title: ",e.title]}),Object(h.jsxs)("p",{children:["Owner: ",e.owner]}),Object(h.jsxs)("p",{children:["Time: ",u()(e.startDate).format("DD MMM YYYY hh:mm A")," -"," ",u()(e.endDate).format("DD MMM YYYY hh:mm A")]}),e.theme?Object(h.jsxs)("p",{children:["Theme: ",e.theme]}):null]})]},e.eventId)}))]})]})}var m=n(27).a.initializeApp({apiKey:"AIzaSyDE8yPkLomMyYrLnu3f_t37CFd_eptOCo8",authDomain:"calendar-firebase-e3f9f.firebaseapp.com",databaseURL:"https://calendar-firebase-e3f9f-default-rtdb.firebaseio.com",projectId:"calendar-firebase-e3f9f",storageBucket:"calendar-firebase-e3f9f.appspot.com",messagingSenderId:"534820117922",appId:"1:534820117922:web:00d0ec4ef1d0eb7b0ae6fb",measurementId:"G-9P678RTSDQ"}).database().ref();function O(e){var t=e.selectedWeek,n=e.addOrEditEvent,a=e.allEvents,r=e.checkForExistingMeetings,c=u()().add(t,"week").startOf("week"),s=new Array(7).fill(c).map((function(e,t){return e.add(t,"day")})),i=function(e,t){var n=a[t],c=n.startDate,s=n.endDate;n.startDate=e.$d.getTime(),n.endDate=n.startDate+(s-c),r(n,t),m.child("events/".concat(t)).set(n,(function(e){return console.log(e)}))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"row col-md-10 g-0",children:s.map((function(e,t){return Object(h.jsx)(f,{addOrEditEvent:n,date:e,isFirstDay:!t,eventsInDay:(r=e,c=a,Object.keys(c).filter((function(e){return c[e].startDate>=r.$d.getTime()&&c[e].endDate<=r.endOf("day").$d.getTime()})).map((function(e){return Object(l.a)(Object(l.a)({},c[e]),{},{eventId:e})}))||[]),handleDrop:i},e.$d.getTime());var r,c}))})})}function v(e){var t=e.onClick,n=e.icon;return Object(h.jsx)("button",{onClick:t,type:"button",className:"calendar-nav-button btn btn-primary ",children:Object(h.jsx)("i",{className:"fas fa-angle-".concat(n)})})}var p=n(25),x=n.n(p);function D(e){var t=e.children,n=e.modalIsOpen,a=e.closeModal,r=e.title;return Object(h.jsx)(x.a,{isOpen:n,onRequestClose:a,contentLabel:r,style:{content:{width:"50%",height:"60vh",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},children:t})}function g(e){var t=e.addOrEditEvent,n=u()();return Object(h.jsx)("div",{className:"col-md-12",children:Object(h.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(e){return t({slot:n.get("minutes")>30?n.add(1,"hour").startOf("hour"):n.set("minute",30)})},children:"+ Create Event"})})}var y=n(26),w=n.n(y);function E(e){var t=e.label,n=e.labelFor;return Object(h.jsx)("label",{labelfor:n,className:"form-label",children:t})}function N(e){var t=e.startDate,n=e.endDate,a=e.onChange;return Object(h.jsxs)("div",{className:"field",children:[Object(h.jsx)(E,{label:"Select date and time"}),Object(h.jsx)(w.a,{onChange:a,pickerClassName:"pickers",className:"date-time-input",startDate:t,endDate:n})]})}function k(e){var t=e.placeholder,n=e.value,a=e.onChange,r=e.name,c=e.label,s=e.required;return Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)(E,{label:c,labelFor:r}),Object(h.jsx)("input",{type:"text",className:"form-control",required:s,placeholder:t,value:n,onChange:function(e){return a(e.currentTarget.value)},id:r})]})}function C(e){var t=e.slot,n=e.closeModal,r=e.startDate,c=e.endDate,s=e.title,i=e.owner,o=e.theme,u=e.eventId,j=e.checkForExistingMeetings,b=Object(a.useState)({startDate:new Date(r||t.$d),endDate:new Date(c||t.add(1,"hour").$d),title:s,theme:o,owner:i}),f=Object(d.a)(b,2),O=f[0],v=f[1],p=function(e){return v(Object(l.a)(Object(l.a)({},O),e))};return Object(h.jsxs)("div",{className:"form-fields",children:[Object(h.jsx)("div",{className:"event-actions",children:Object(h.jsx)("i",{onClick:function(e){window.confirm("Are you sure you want to delete this event ?")&&(m.child("events/".concat(u)).remove((function(e){return console.log(e)})),n())},className:"fas fa-trash delete-event"})}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=O.startDate,a=O.endDate,r=Object(l.a)(Object(l.a)({},O),{},{theme:O.theme||null,startDate:t.getTime(),endDate:a.getTime()});j(r,u),u?m.child("events/".concat(u)).set(r,(function(e){return console.log(e)})):m.child("events").push(r,(function(e){return console.log(e)})),n()},children:[Object(h.jsx)(N,{startDate:O.startDate,endDate:O.endDate,onChange:function(e){return p({endDate:e.end,startDate:e.start})}}),Object(h.jsx)(k,{placeholder:"Enter event title",value:O.title,onChange:function(e){return p({title:e})},label:"Title",name:"title",required:!0}),Object(h.jsx)(k,{placeholder:"Enter owner name",value:O.owner,onChange:function(e){return p({owner:e})},label:"Owner",name:"owner",required:!0}),Object(h.jsx)(k,{placeholder:"Enter theme",value:O.theme,onChange:function(e){return p({theme:e})},label:"Theme",name:"theme"}),Object(h.jsx)("button",{type:"submit",class:"btn btn-info",children:"Save"})]})]})}var M=["isOpen","slot"];function T(e){var t=Object(a.useState)(0),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({}),o=Object(d.a)(s,2),j=o[0],b=o[1],f=Object(a.useState)({}),p=Object(d.a)(f,2),x=p[0],y=p[1],w=function(e){b(Object(l.a)({isOpen:!0},e))};Object(a.useEffect)((function(){m.child("events").on("value",(function(e){var t=e.val();t&&y(Object(l.a)({},t))}))}),[]);var E=function(e,t){return function(e,t,n){var a=Object.keys(t).filter((function(a){var r=t[a];return Math.max(Math.min(e.endDate,r.endDate)-Math.max(e.startDate,r.startDate),0)>0&&a!==n}));if(a.length){var r=t[a[0]];window.alert('There is already a meeting "'.concat(r.title,'" starting at ').concat(u()(r.startDate).format("DD/MM/YYYY hh:mm A")))}return a}(e,x,t)},N=j.isOpen,k=j.slot,T=Object(i.a)(j,M),I=function(e){return b(Object(l.a)(Object(l.a)({},j),{},{isOpen:!N}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Calendar"}),Object(h.jsx)(g,{addOrEditEvent:w}),Object(h.jsxs)("div",{className:"calendar-container row",children:[Object(h.jsx)(v,{onClick:function(e){return c(r-1)},icon:"left"}),Object(h.jsx)(O,{selectedWeek:r,addOrEditEvent:w,allEvents:x,checkForExistingMeetings:E}),Object(h.jsx)(v,{onClick:function(e){return c(r+1)},icon:"right"}),Object(h.jsx)(D,{modalIsOpen:N,closeModal:I,title:"Enter event details",children:Object(h.jsx)(C,Object(l.a)(Object(l.a)({checkForExistingMeetings:E,slot:k},T),{},{closeModal:I}))})]})]})}var I=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(T,{})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),Y()}},[[57,1,2]]]);
//# sourceMappingURL=main.f5cf28c1.chunk.js.map