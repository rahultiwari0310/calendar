(this.webpackJsonpcalendar_firebase=this.webpackJsonpcalendar_firebase||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),c=n(16),s=n.n(c),i=(n(36),n.p,n(37),n(31)),l=n(10),d=n(13),o=n(11),u=n.n(o),j=n(30),b=n(26),h=n(20),f=n(2);function m(e){var t=e.date,n=e.isFirstDay,a=e.addOrEditEvent,r=e.eventsInDay,c=e.handleDrop,s=e.checkForExistingMeetings;return Object(f.jsxs)("div",{className:"col border",children:[Object(f.jsx)("div",{className:"day-heading",children:t.format("DD MMM YYYY")}),Object(f.jsx)("div",{className:"day-heading",children:t.format("dddd")}),Object(f.jsxs)("div",{className:"half-hours",children:[new Array(48).fill(1).map((function(e,r){var s=t.startOf("day").add(30*r,"minutes");return Object(f.jsx)(h.Droppable,{types:["event"],onDrop:function(e){c(s,e.event)},children:Object(f.jsx)("div",{className:"half-hour half-hour-".concat(r%2),onClick:function(e){return a({slot:s})},children:!n||r%2?null:Object(f.jsx)("span",{className:"half-hour-time",children:s.format("hh:mm A")})},s.$d.getTime())},s.$d.getTime())})),r.map((function(e){var n=s(e,e.eventId,!0),r=[].concat(Object(j.a)(n),[e.eventId]).sort((function(e,t){return e.localeCompare(t)})).indexOf(e.eventId);return Object(f.jsxs)("div",{className:"event-in-day",style:O(e,n,r,t),"data-for":e.eventId,"data-tip":!0,onClick:function(t){return a(Object(l.a)({},e))},children:[Object(f.jsx)(h.Draggable,{type:"event",data:e.eventId,children:Object(f.jsxs)("div",{className:"event-content",children:[Object(f.jsx)("div",{className:"event-title",children:e.title}),Object(f.jsxs)("div",{className:"event-time",children:[u()(e.startDate).format("hh:mm")," -"," ",u()(e.endDate).format("hh:mm A")]})]})}),Object(f.jsxs)(b.a,{id:e.eventId,effect:"solid",clickable:!0,offset:{top:0,left:0},children:[Object(f.jsxs)("p",{children:["Title: ",e.title]}),Object(f.jsxs)("p",{children:["Owner: ",e.owner]}),Object(f.jsxs)("p",{children:["Time: ",u()(e.startDate).format("DD MMM YYYY hh:mm A")," -"," ",u()(e.endDate).format("DD MMM YYYY hh:mm A")]}),e.theme?Object(f.jsxs)("p",{children:["Theme: ",e.theme]}):null]})]},e.eventId)}))]})]})}var O=function(e,t,n,a){var r=a.startOf("day").$d.getTime(),c=a.endOf("day").$d.getTime(),s=Math.max(e.startDate,r),i=(Math.min(e.endDate,c)-s)/18e5*20+"px",l=(s-a.startOf("day").$d.getTime())/18e5*20+"px",d=100/(t.length+1)*n+"%";return{width:100/(t.length+1)+"%",top:l,height:i,left:d}},v=n(29).a.initializeApp({apiKey:"AIzaSyDE8yPkLomMyYrLnu3f_t37CFd_eptOCo8",authDomain:"calendar-firebase-e3f9f.firebaseapp.com",databaseURL:"https://calendar-firebase-e3f9f-default-rtdb.firebaseio.com",projectId:"calendar-firebase-e3f9f",storageBucket:"calendar-firebase-e3f9f.appspot.com",messagingSenderId:"534820117922",appId:"1:534820117922:web:00d0ec4ef1d0eb7b0ae6fb",measurementId:"G-9P678RTSDQ"}).database().ref(),p=function(e,t){return Math.max(Math.min(e.endDate,t.endDate)-Math.max(e.startDate,t.startDate),0)>0};function x(e){var t=e.selectedWeek,n=e.addOrEditEvent,a=e.allEvents,r=e.checkForExistingMeetings,c=u()().add(t,"week").startOf("week"),s=new Array(7).fill(c).map((function(e,t){return e.add(t,"day")})),i=function(e,t){var n=a[t],c=n.startDate,s=n.endDate;n.startDate=e.$d.getTime(),n.endDate=n.startDate+(s-c),r(n,t),v.child("events/".concat(t)).set(n,(function(e){return console.log(e)}))};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"row col-md-10 g-0",children:s.map((function(e,t){return Object(f.jsx)(m,{addOrEditEvent:n,date:e,isFirstDay:!t,eventsInDay:(c=e,s=a,Object.keys(s).filter((function(e){return p(s[e],{startDate:c.$d.getTime(),endDate:c.endOf("day").$d.getTime()})})).map((function(e){return Object(l.a)(Object(l.a)({},s[e]),{},{eventId:e})}))||[]),handleDrop:i,checkForExistingMeetings:r},e.$d.getTime());var c,s}))})})}function g(e){var t=e.onClick,n=e.icon;return Object(f.jsx)("button",{onClick:t,type:"button",className:"calendar-nav-button btn btn-primary ",children:Object(f.jsx)("i",{className:"fas fa-angle-".concat(n)})})}var D=n(27),y=n.n(D);function E(e){var t=e.children,n=e.modalIsOpen,a=e.closeModal,r=e.title;return Object(f.jsx)(y.a,{isOpen:n,onRequestClose:a,contentLabel:r,style:{content:{width:"50%",height:"70vh",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},children:t})}function k(e){var t=e.addOrEditEvent,n=u()();return Object(f.jsx)("div",{className:"create-event",children:Object(f.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(e){return t({slot:n.get("minutes")>30?n.add(1,"hour").startOf("hour"):n.set("minute",30)})},children:"+ Create Event"})})}var M=n(28),N=n.n(M);function w(e){var t=e.label,n=e.labelFor;return Object(f.jsx)("label",{labelfor:n,className:"form-label",children:t})}function C(e){var t=e.startDate,n=e.endDate,a=e.onChange;return Object(f.jsxs)("div",{className:"field mb-3",children:[Object(f.jsx)(w,{label:"Select date and time"}),Object(f.jsx)(N.a,{onChange:a,pickerClassName:"pickers",className:"date-time-input",startDate:t,endDate:n})]})}function T(e){var t=e.placeholder,n=e.value,a=e.onChange,r=e.name,c=e.label,s=e.required;return Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)(w,{label:c,labelFor:r}),Object(f.jsx)("input",{type:"text",className:"form-control",required:s,placeholder:t,value:n,onChange:function(e){return a(e.currentTarget.value)},id:r})]})}function I(e){var t=e.slot,n=e.closeModal,r=e.startDate,c=e.endDate,s=e.title,i=e.owner,o=e.theme,u=e.eventId,j=e.checkForExistingMeetings,b=Object(a.useState)({startDate:new Date(r||t.$d),endDate:new Date(c||t.add(1,"hour").$d),title:s,theme:o,owner:i}),h=Object(d.a)(b,2),m=h[0],O=h[1],p=function(e){return O(Object(l.a)(Object(l.a)({},m),e))};return Object(f.jsxs)("div",{className:"form-fields",children:[Object(f.jsx)("h3",{className:"event-form-heading",children:"Event"}),Object(f.jsx)("div",{className:"event-actions",children:Object(f.jsx)("i",{onClick:function(e){window.confirm("Are you sure you want to delete this event ?")&&(v.child("events/".concat(u)).remove((function(e){return console.log(e)})),n())},className:"fas fa-trash delete-event"})}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=m.startDate,a=m.endDate,r=Object(l.a)(Object(l.a)({},m),{},{theme:m.theme||null,startDate:t.getTime(),endDate:a.getTime()});j(r,u),u?v.child("events/".concat(u)).set(r,(function(e){return console.log(e)})):v.child("events").push(r,(function(e){return console.log(e)})),n()},children:[Object(f.jsx)(C,{startDate:m.startDate,endDate:m.endDate,onChange:function(e){return p({endDate:e.end,startDate:e.start})}}),Object(f.jsx)(T,{placeholder:"Enter event title",value:m.title,onChange:function(e){return p({title:e})},label:"Title",name:"title",required:!0}),Object(f.jsx)(T,{placeholder:"Enter owner name",value:m.owner,onChange:function(e){return p({owner:e})},label:"Owner",name:"owner",required:!0}),Object(f.jsx)(T,{placeholder:"Enter theme",value:m.theme,onChange:function(e){return p({theme:e})},label:"Theme",name:"theme"}),Object(f.jsx)("button",{type:"submit",class:"btn btn-info",children:"Save"})]})]})}var F=["isOpen","slot"];function Y(e){var t=Object(a.useState)(0),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({}),o=Object(d.a)(s,2),j=o[0],b=o[1],h=Object(a.useState)({}),m=Object(d.a)(h,2),O=m[0],D=m[1],y=function(e){b(Object(l.a)({isOpen:!0},e))};Object(a.useEffect)((function(){v.child("events").on("value",(function(e){var t=e.val();t&&D(Object(l.a)({},t))}))}),[]);var M=function(e,t,n){return function(e,t,n,a){var r=Object.keys(t).filter((function(a){var r=t[a];return p(e,r)&&a!==n}));if(r.length){var c=t[r[0]];!a&&window.alert('There is already a meeting "'.concat(c.title,'" starting at ').concat(u()(c.startDate).format("DD/MM/YYYY hh:mm A")))}return r}(e,O,t,n)},N=j.isOpen,w=j.slot,C=Object(i.a)(j,F),T=function(e){return b(Object(l.a)(Object(l.a)({},j),{},{isOpen:!N}))};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"app-head",children:[Object(f.jsxs)("h1",{children:[Object(f.jsx)("i",{class:"fas fa-calendar-alt"})," Weekly Calendar"]}),Object(f.jsx)(k,{addOrEditEvent:y})]}),Object(f.jsxs)("div",{className:"calendar-container row",children:[Object(f.jsx)(g,{onClick:function(e){return c(r-1)},icon:"left"}),Object(f.jsx)(x,{selectedWeek:r,addOrEditEvent:y,allEvents:O,checkForExistingMeetings:M}),Object(f.jsx)(g,{onClick:function(e){return c(r+1)},icon:"right"}),Object(f.jsx)(E,{modalIsOpen:N,closeModal:T,title:"Enter event details",children:Object(f.jsx)(I,Object(l.a)(Object(l.a)({checkForExistingMeetings:M,slot:w},C),{},{closeModal:T}))})]})]})}var S=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(Y,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(S,{})}),document.getElementById("root")),A()}},[[60,1,2]]]);
//# sourceMappingURL=main.223bd957.chunk.js.map